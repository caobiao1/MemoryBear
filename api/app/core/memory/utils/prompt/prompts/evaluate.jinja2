你将收到一组用户历史记忆原始数据（来源于 Neo4j），以及相关配置参数：
原本的输入句子：{{statement_databasets}}
需要检测冲突对象：{{ evaluate_data }}
冲突判定类型：{{ baseline }}（取值为 TIME / FACT / HYBRID）
记忆审核开关：{{ memory_verify }}（取值为 true / false）
记忆质量评估开关开关：{{ quality_assessment }}（取值为 true / false）

你的任务是：
对用户历史记忆数据进行冲突检测和记忆审核，并输出严格结构化的 JSON 分析结果
数据的结构：
    statement_databasets里面statement_name是输入的句子，statement_id是连接evaluate_data里面的statement_id，代表这个句子被拆分成几个实体，需要根据整体的内容，
    需要根据以下内容做处理（冲突检测、记忆审核、记忆的质量评估）
## 冲突定义

### 时间冲突
时间冲突是指同一用户的相关事件在时间维度上存在逻辑矛盾：

1. **同一活动的时间冲突**：
   - 同一用户的同一活动在不同时间点被记录（如"周五打球"和"周六打球"）
   - 同一用户在同一时间段内被记录进行不同的互斥活动

2. **时间逻辑错误**：
   - expired_at 早于 created_at
   - 同一事实的 created_at 时间差异超过合理误差范围（>5分钟）

3. **日期属性冲突**：
   - 同一人的生日记录为不同日期（如"2月10号"和"2月16号"）
4.存在明确先后约束 A -> B，但 t(A) > t(B)
    -例：入学时间晚于毕业时间。
    -处理：标记异常、降权、触发逻辑反思或人工审查。
5.时间属性冲突
    -单值日期属性出现多值（生日、入职日期）
    -注意：本质属于事实冲突的日期特例，归入事实冲突仲裁框架。
6.互斥重叠冲突
    -例：同一主体的两个事件区间重叠且互斥（如同一时间出现在两地）
    -处理：证据仲裁、保留多版本（active + candidate）。



### 事实冲突
事实冲突是指同一实体的属性或关系存在相互矛盾的陈述：

1. **属性互斥**：同一实体的相反属性（喜欢↔不喜欢、有↔没有、是↔不是）
2. **关系矛盾**：同一实体在相同语境下的不同关系描述
3. **身份冲突**：同一实体被赋予不同的类型或角色

### 混合冲突检测
检测所有类型的冲突，包括但不限于时间冲突和事实冲突：
检测任何逻辑上不一致或相互矛盾的记录
## 记忆审核定义

### 隐私信息检测（隐私冲突）
当memory_verify为true时，需要额外检测包含个人隐私信息的记录：

1. **身份证信息**：包含身份证号码、身份证相关描述
2. **手机号码**：包含手机号、电话号码等联系方式
3. **社交账号**：包含微信号、QQ号、邮箱地址等社交平台信息
4. **银行信息**：包含银行卡号、账户信息、支付信息
5. **税务信息**：包含税号、纳税信息、发票信息
6. **贷款信息**：包含贷款记录、信贷信息、借款信息
7. **其他敏感信息**：包含密码、PIN码、验证码等安全信息

### 隐私检测原则
- 检测description、entity1_name、entity2_name等字段中的隐私信息
- 识别数字模式（如手机号11位数字、身份证18位等）
- 识别关键词（如"身份证"、"银行卡"、"密码"等）
- 检测敏感实体类型和关系

## 冲突检测原则

**全面检测**：不区分冲突类型，检测所有可能的冲突
**完整输出**：如果发现任何冲突或隐私信息，必须将所有相关记录都放入data字段
**实体关联**：重点检查涉及相同实体（entity1_name, entity2_name）的记录
**语义分析**：分析description字段的语义相似性和冲突性
**时间逻辑**：检查时间字段的逻辑一致性
**隐私检测**：当memory_verify为true时，检测所有包含隐私信息的记录

## 不符合冲突检测
    -称呼
## 重要检测示例

### 冲突检测示例
- 用户与不同时间点的关系（周五 vs 周六，2月10号 vs 2月16号）
- 同一实体的重复定义但描述不同
- 同一关系的不同表述但含义冲突
- 任何逻辑上不可能同时为真的记录

### 隐私信息检测示例
- 包含手机号的记录："用户的手机号是13812345678"
- 包含身份证的记录："身份证号码为110101199001011234"
- 包含银行卡的记录："银行卡号6222021234567890"
- 包含社交账号的记录："微信号是user123456"
- 包含敏感信息的实体名称或描述

## 输出要求

**关键原则**：
1. 当存在冲突或检测到隐私信息时，conflict才为true，data字段才包含相关记录
2. 如果发现冲突，必须将所有相关的冲突记录都放入data数组中
3. 如果memory_verify为true且检测到隐私信息，必须将包含隐私信息的记录也放入data数组中
4. 既没有冲突也没有隐私信息时，conflict为false，data为空数组
5. 如果quality_assessment为true，独立分析数据质量并输出评估结果；如果为false，quality_assessment字段输出null
6. 冲突检测、隐私审核和质量评估三个功能完全独立，互不影响
7. 不输出conflict_memory字段

**处理逻辑**：
- 首先进行冲突检测，将冲突记录加入data数组
- 如果memory_verify为true，再进行隐私信息检测，将包含隐私信息的记录也加入data数组
- 如果quality_assessment为true，独立进行质量评估，分析所有输入数据的质量并输出评估结果
- 最终data数组包含所有冲突记录和隐私信息记录（去重）
- quality_assessment字段独立输出，不影响冲突检测和隐私审核结果
- memory_verify字段独立输出隐私检测结果，包含检测到的隐私信息类型和概述

返回数据格式以json方式输出:
- 必须通过json.loads()的格式支持的形式输出,响应必须是与此确切模式匹配的有效JSON对象。不要在JSON之前或之后包含任何文本。
- 关键的JSON格式要求{"statement":识别出的文本内容}
1.JSON结构仅使用标准ASCII双引号（"）-切勿使用中文引号（""）或其他Unicode引号
2.如果提取的语句文本包含引号，请使用反斜杠（\"）正确转义它们
3.确保所有JSON字符串都正确关闭并以逗号分隔
4.JSON字符串值中不包括换行符
5.正确转义的例子："statement"："Zhang Xinhua said：\"我非常喜欢这本书\""
6.不允许输出```json```相关符号，如```json```、``````、```python```、```javascript```、```html```、```css```、```sql```、```java```、```c```、```c++```、```c#```、```ruby```

## 记忆质量评估定义

### 质量评估标准
当quality_assessment为true时，需要对记忆数据进行质量评估：

1. **数据完整性**：
   - 检查必要字段是否完整（entity1_name、entity2_name、description等）
   - 检查关系描述是否清晰明确
   - 检查时间字段的有效性

2. **重复字段检测**：
   - 识别相同或高度相似的记录
   - 检测冗余的实体关系
   - 分析描述内容的重复度

3. **无意义字段检测**：
   - 识别空值、无效值或占位符内容
   - 检测过于简单或无信息量的描述
   - 识别格式错误或不规范的数据

4. **上下文依赖性**：
   - 评估记录是否需要额外上下文才能理解
   - 检查实体名称的明确性
   - 分析关系描述的自包含性

### 质量评估输出
- **质量百分比**：基于上述标准计算的整体质量分数（0-100）
- **质量概述**：简要描述数据质量状况，包括主要问题和优点

输出是仅输出一个合法 JSON 对象，严格遵循下述结构：
{
  "data": [
    {
      "entity1_name": "实体1名称",
      "description": "描述信息",
      "statement_id": "陈述ID",
      "created_at": "创建时间戳",
      "expired_at": "过期时间戳",
      "relationship_type": "关系类型",
      "relationship": "关系对象",
      "entity2_name": "实体2名称",
      "entity2": "实体2对象"
    }
  ],
  "conflict": true或false,
  "quality_assessment": {
    "score": 质量百分比数字,
    "summary": "质量概述文本"
  } 或 null,
  "memory_verify": {
    "has_privacy": true或false,
    "privacy_types": ["检测到的隐私信息类型列表"],
    "summary": "隐私检测结果概述"
  } 或 null
}

必须遵守：
- 只输出 JSON，不要添加解释或多余文本。
- 使用标准双引号，必要时对内部引号进行转义。
- 字段名与结构必须与给定模式一致。
- data数组中包含冲突记录和隐私信息记录，如果都没有则为空数组。
- quality_assessment字段：当quality_assessment参数为true时输出评估对象，为false时输出null。
- memory_verify字段：当memory_verify参数为true时输出隐私检测结果对象，为false时输出null。

### memory_verify字段说明
当memory_verify为true时，需要输出隐私检测结果：
- **has_privacy**: 布尔值，表示是否检测到隐私信息
- **privacy_types**: 字符串数组，包含检测到的隐私信息类型（如["手机号码", "身份证信息"]）
- **summary**: 字符串，简要描述隐私检测结果

当memory_verify为false时，memory_verify字段输出null。

### memory_verify字段示例

**示例1：检测到隐私信息**
```json
"memory_verify": {
  "has_privacy": true,
  "privacy_types": ["手机号码", "身份证信息"],
  "summary": "检测到2条记录包含隐私信息：1个手机号码，1个身份证号码"
}
```

**示例2：未检测到隐私信息**
```json
"memory_verify": {
  "has_privacy": false,
  "privacy_types": [],
  "summary": "未检测到隐私信息"
}
```

**示例3：memory_verify为false时**
```json
"memory_verify": null
```

模式参考：
{{ json_schema }}
# 记忆数据分析任务

## 输入数据
- **原始句子**: {{statement_databasets}}
- **检测对象**: {{ evaluate_data }}
- **冲突类型**: {{ baseline }} (TIME/FACT/HYBRID)
- **隐私审核**: {{ memory_verify }} (true/false)
- **质量评估**: {{ quality_assessment }} (true/false)

## 任务目标
对用户记忆数据进行冲突检测、隐私审核和质量评估，输出结构化JSON结果。
**数据关系**: statement_databasets中的statement_id对应evaluate_data中的记录，代表句子拆分后的实体关系。
## 1. 冲突检测
### 时间冲突
- **同一活动时间矛盾**: 同一用户同一活动的不同时间记录
- **时间逻辑错误**: expired_at < created_at，created_at时间差>5分钟
- **日期属性冲突**: 同一人的生日等单值属性出现多值
- **先后约束违反**: 存在A→B约束但t(A)>t(B)（如入学>毕业）
- **互斥重叠**: 同一时间出现在不同地点等互斥事件
### 事实冲突
- **属性互斥**: 同一实体的相反属性（喜欢↔不喜欢）
- **关系矛盾**: 同一实体在相同语境下的不同关系描述
- **身份冲突**: 同一实体被赋予不同类型或角色
### 混合冲突
检测所有逻辑不一致或相互矛盾的记录。
**检测原则**: 
- 重点检查相同实体的记录
- 分析description字段语义冲突
- 验证时间字段逻辑一致性
## 2. 隐私审核 (memory_verify=true时)
### 隐私信息类型
- **身份信息**: 身份证号码、身份证相关描述
- **联系方式**: 手机号、电话号码
- **社交账号**: 微信号、QQ号、邮箱地址
- **金融信息**: 银行卡号、账户信息、支付信息
- **税务信息**: 税号、纳税信息、发票信息
- **贷款信息**: 贷款记录、信贷信息
- **安全信息**: 密码、PIN码、验证码
### 检测方法
- 检测description、entity1_name、entity2_name、name等字段
- 识别数字模式（手机号11位、身份证18位等）
- 识别关键词（"身份证"、"银行卡"、"密码"等）
## 3. 质量评估 (quality_assessment=true时)
### 评估标准
- **数据完整性**: 必要字段完整性、关系描述清晰度、时间字段有效性
- **重复检测**: 相同或高度相似记录、冗余实体关系、描述重复度
- **无意义检测**: 空值/无效值、过于简单的描述、格式错误
- **上下文依赖**: 记录自包含性、实体名称明确性
### 输出内容
- **质量分数**: 0-100的整体质量百分比
- **质量概述**: 简要描述数据质量状况和主要问题
## 输出规则
### 核心原则
1. **conflict=true**: 存在冲突或隐私信息时，将所有相关记录放入data数组
2. **conflict=false**: 无冲突且无隐私信息时，data为空数组
3. **独立功能**: 冲突检测、隐私审核、质量评估三者完全独立
4. **条件输出**: 
   - quality_assessment=true时输出评估对象，否则为null
   - memory_verify=true时输出隐私检测对象，否则为null
5. **不输出conflict_memory字段**
### 处理流程
1. 冲突检测 → 将冲突记录加入data
2. 隐私审核(如启用) → 将隐私记录加入data
3. 质量评估(如启用) → 独立输出评估结果
4. 去重data数组中的记录

**输出结构**:
```json
{
  "data": [记录数组],
  "conflict": true/false,
  "quality_assessment": {
    "score": 数字,
    "summary": "文本"
  } 或 null,
  "memory_verify": {
    "has_privacy": true/false,
    "privacy_types": ["类型数组"],
    "summary": "概述文本"
  } 或 null
}
```
**字段说明**:
- **data**: 包含冲突记录和隐私信息记录，无则为空数组
- **quality_assessment**: quality_assessment=true时输出评估对象，否则为null
- **memory_verify**: memory_verify=true时输出隐私检测对象，否则为null
模式参考：{{ json_schema }}